{"version":3,"sources":["jquery.fitvids.js","gallery-card.js","sticky-nav-title.js"],"names":["$","fn","fitVids","options","head","div","settings","customSelector","ignore","document","getElementById","getElementsByTagName","createElement","innerHTML","appendChild","childNodes","extend","this","each","selectors","ignoreList","push","$allVideos","find","join","not","aspectRatio","videoName","$this","parents","length","tagName","toLowerCase","parent","css","isNaN","attr","parseInt","height","width","_count","wrap","removeAttr","window","jQuery","Zepto","addEventListener","querySelectorAll","forEach","image","container","closest","attributes","value","style","flex","Casper","stickyNavTitle","nav","querySelector","navSelector","title","titleSelector","lastScrollY","scrollY","ticking","update","getBoundingClientRect","top","offsetHeight","classList","add","activeClass","remove","requestAnimationFrame","passive"],"mappings":"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","file":"casper.js","sourcesContent":["/*jshint browser:true */\n/*!\n* FitVids 1.3\n*\n*\n* Copyright 2017, Chris Coyier + Dave Rupert + Ghost Foundation\n* This is an unofficial release, ported by John O'Nolan\n* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/\n* Released under the MIT license\n*\n*/\n\n;(function( $ ){\n\n  'use strict';\n\n  $.fn.fitVids = function( options ) {\n    var settings = {\n      customSelector: null,\n      ignore: null\n    };\n\n    if(!document.getElementById('fit-vids-style')) {\n      // appendStyles: https://github.com/toddmotto/fluidvids/blob/master/dist/fluidvids.js\n      var head = document.head || document.getElementsByTagName('head')[0];\n      var css = '.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}';\n      var div = document.createElement(\"div\");\n      div.innerHTML = '<p>x</p><style id=\"fit-vids-style\">' + css + '</style>';\n      head.appendChild(div.childNodes[1]);\n    }\n\n    if ( options ) {\n      $.extend( settings, options );\n    }\n\n    return this.each(function(){\n      var selectors = [\n        'iframe[src*=\"player.vimeo.com\"]',\n        'iframe[src*=\"youtube.com\"]',\n        'iframe[src*=\"youtube-nocookie.com\"]',\n        'iframe[src*=\"kickstarter.com\"][src*=\"video.html\"]',\n        'object',\n        'embed'\n      ];\n\n      if (settings.customSelector) {\n        selectors.push(settings.customSelector);\n      }\n\n      var ignoreList = '.fitvidsignore';\n\n      if(settings.ignore) {\n        ignoreList = ignoreList + ', ' + settings.ignore;\n      }\n\n      var $allVideos = $(this).find(selectors.join(','));\n      $allVideos = $allVideos.not('object object'); // SwfObj conflict patch\n      $allVideos = $allVideos.not(ignoreList); // Disable FitVids on this video.\n\n      $allVideos.each(function(){\n        var $this = $(this);\n        if($this.parents(ignoreList).length > 0) {\n          return; // Disable FitVids on this video.\n        }\n        if (this.tagName.toLowerCase() === 'embed' && $this.parent('object').length || $this.parent('.fluid-width-video-wrapper').length) { return; }\n        if ((!$this.css('height') && !$this.css('width')) && (isNaN($this.attr('height')) || isNaN($this.attr('width'))))\n        {\n          $this.attr('height', 9);\n          $this.attr('width', 16);\n        }\n        var height = ( this.tagName.toLowerCase() === 'object' || ($this.attr('height') && !isNaN(parseInt($this.attr('height'), 10))) ) ? parseInt($this.attr('height'), 10) : $this.height(),\n            width = !isNaN(parseInt($this.attr('width'), 10)) ? parseInt($this.attr('width'), 10) : $this.width(),\n            aspectRatio = height / width;\n        if(!$this.attr('name')){\n          var videoName = 'fitvid' + $.fn.fitVids._count;\n          $this.attr('name', videoName);\n          $.fn.fitVids._count++;\n        }\n        $this.wrap('<div class=\"fluid-width-video-container\"><div class=\"fluid-width-video-wrapper\"></div></div>').parent('.fluid-width-video-wrapper').css('padding-top', (aspectRatio * 100)+'%');\n        $this.removeAttr('height').removeAttr('width');\n      });\n    });\n  };\n\n  // Internal counter for unique video names.\n  $.fn.fitVids._count = 0;\n\n// Works with either jQuery or Zepto\n})( window.jQuery || window.Zepto );\n","/* eslint-env browser */\n\n/**\n * Gallery card support\n * Used on any individual post/page\n *\n * Detects when a gallery card has been used and applies sizing to make sure\n * the display matches what is seen in the editor.\n */\n\n(function (window, document) {\n    var resizeImagesInGalleries = function resizeImagesInGalleries() {\n        var images = document.querySelectorAll('.kg-gallery-image img');\n        images.forEach(function (image) {\n            var container = image.closest('.kg-gallery-image');\n            var width = image.attributes.width.value;\n            var height = image.attributes.height.value;\n            var ratio = width / height;\n            container.style.flex = ratio + ' 1 0%';\n        });\n    };\n\n    document.addEventListener('DOMContentLoaded', resizeImagesInGalleries);\n})(window, document);\n","/* eslint-env browser */\n\n/**\n * Nav/Title replacement\n * Used on invividual post pages, displays the post title in place of the nav\n * bar when scrolling past the title\n *\n * Usage:\n * ```\n * Casper.stickyTitle({\n *     navSelector: '.site-nav-main',\n *     titleSelector: '.post-full-title',\n *     activeClass: 'nav-post-title-active'\n * });\n * ```\n */\n\n(function (window, document) {\n    // set up Casper as a global object\n    if (!window.Casper) {\n        window.Casper = {};\n    }\n\n    window.Casper.stickyNavTitle = function stickyNavTitle(options) {\n        var nav = document.querySelector(options.navSelector);\n        var title = document.querySelector(options.titleSelector);\n\n        var lastScrollY = window.scrollY;\n        var ticking = false;\n\n        function onScroll() {\n            lastScrollY = window.scrollY;\n            requestTick();\n        }\n\n        function requestTick() {\n            if (!ticking) {\n                requestAnimationFrame(update);\n            }\n            ticking = true;\n        }\n\n        function update() {\n            var trigger = title.getBoundingClientRect().top + window.scrollY;\n            var triggerOffset = title.offsetHeight + 35;\n\n            // show/hide post title\n            if (lastScrollY >= trigger + triggerOffset) {\n                nav.classList.add(options.activeClass);\n            } else {\n                nav.classList.remove(options.activeClass);\n            }\n\n            ticking = false;\n        }\n\n        window.addEventListener('scroll', onScroll, {passive: true});\n\n        update();\n    };\n})(window, document);\n"]}